schema: '2.0'
stages:
  embeddings:
    cmd: python -m src.embeddings
    deps:
    - path: data/processed/places.parquet
      hash: md5
      md5: 44c5bf0d2ce9ad9840159a3f7f1842d4
      size: 425378637
    - path: src/common/utils.py
      hash: md5
      md5: c6e690382e2fae73e561c701740d8e59
      size: 3766
    - path: src/embeddings.py
      hash: md5
      md5: 96885125fc45cdb959f87b8fdc814958
      size: 1423
    outs:
    - path: data/processed/h3_embeddings.parquet
      hash: md5
      md5: aca626d511c7c690212c4c1b9cde11fe
      size: 4003966
    - path: data/processed/lad_embeddings.parquet
      hash: md5
      md5: 2bb9a6ac20d897e18c7d297ea94c035c
      size: 1145890
    - path: data/processed/region_embeddings.parquet
      hash: md5
      md5: 075d8dc57595f0de7e443a61e173ec48
      size: 38561
  preprocesing:
    cmd: python -m src.preprocessing
    deps:
    - path: /home/cjber/data/en_regions.gpkg
      md5: 22714807a2048d80f256cd19977bdcb4
      size: 23420928
    - path: /home/cjber/data/places-2023_04_11.parquet
      md5: bcb63ac9ff9597b327430e2b0188333e
      size: 363137511
    - path: /home/cjber/data/places_full-2023_04_11.parquet
      md5: f495c36d310ffb50914c43fce98160b8
      size: 393266925
    - path: /home/cjber/data/scot_bdry.gpkg
      md5: 9c16518630c809fe1ade133e415c454d
      size: 3694592
    - path: /home/cjber/data/wales_bdry.gpkg
      md5: 6de86ba2aafbfc933f442075bb4afdfb
      size: 5984256
    - path: src/preprocessing.py
      md5: 1bd17b5fcebabbebf10fa55c277079d5
      size: 3845
    outs:
    - path: data/processed/place_regions.parquet
      md5: 1151203e3f5089149bca75e2c0c4aab5
      size: 183877946
    - path: data/processed/places.parquet
      md5: cd4f0610ba3e0e18adf6e92fa8823abf
      size: 227356613
  zero-shot:
    cmd: python -m src.zero-shot
    deps:
    - path: data/processed/places.parquet
      md5: cd4f0610ba3e0e18adf6e92fa8823abf
      size: 227356613
    - path: src/zero-shot.py
      md5: cb0368fc748597e17c686ba8474d917b
      size: 1649
    outs:
    - path: data/processed/places-zero-shot.parquet
      md5: f529a3688154967a1f0a93434ceb9357
      size: 4383041
  zero_shot:
    cmd: python -m src.zero_shot
    deps:
    - path: data/processed/places.parquet
      hash: md5
      md5: 44c5bf0d2ce9ad9840159a3f7f1842d4
      size: 425378637
    - path: src/common/utils.py
      hash: md5
      md5: c6e690382e2fae73e561c701740d8e59
      size: 3766
    - path: src/zero_shot.py
      hash: md5
      md5: 459664bbb46dfd349a2fe8d97e54113b
      size: 1152
    outs:
    - path: data/processed/places_zero_shot.parquet
      hash: md5
      md5: 9c8c68d8da5e42f73b644e6713d0d62a
      size: 325155239
  preprocessing:
    cmd: python -m src.preprocessing
    deps:
    - path: data/processed/exclude.txt
      hash: md5
      md5: a1cac4529820d5a3832e36171e8603ac
      size: 379
    - path: data/raw/LAD_BUC_2022.gpkg
      hash: md5
      md5: ca5bde55226f2d69d9bf5dcf7d366a58
      size: 774144
    - path: data/raw/RGN_EN_BUC_2022.gpkg
      hash: md5
      md5: 6daf76e355bb71cbd1cb505e6f90ee69
      size: 217088
    - path: data/raw/places-2023_04_11.parquet
      hash: md5
      md5: bcb63ac9ff9597b327430e2b0188333e
      size: 363137511
    - path: data/raw/places_full-2023_04_11.parquet
      hash: md5
      md5: f495c36d310ffb50914c43fce98160b8
      size: 393266925
    - path: src/common/utils.py
      hash: md5
      md5: c6e690382e2fae73e561c701740d8e59
      size: 3766
    - path: src/preprocessing.py
      hash: md5
      md5: 7cadf388d7f88cb4f5eb47de8c1b2bb5
      size: 3130
    outs:
    - path: data/processed/place_regions.parquet
      hash: md5
      md5: f4c3cd75dd980475dcf0e9a595f8e0fc
      size: 198591554
    - path: data/processed/places.parquet
      hash: md5
      md5: 44c5bf0d2ce9ad9840159a3f7f1842d4
      size: 425378637
  paper:
    cmd: quarto render paper/main.qmd --execute-dir=$PWD
    deps:
    - path: data/processed
      hash: md5
      md5: 8b05377335b2ab5f1a317b9ce3f4203a.dir
      size: 954314365
      nfiles: 8
    - path: paper/figures
      hash: md5
      md5: abfb671aef89f77f2e9ccba9f0cc8cb4.dir
      size: 1039621
      nfiles: 18
    - path: paper/main.qmd
      hash: md5
      md5: 22f41fc276b20960bb00661993a769a8
      size: 51444
    outs:
    - path: paper/main.pdf
      hash: md5
      md5: a40e6127cf87992f1d594fe456426902
      size: 3897519
